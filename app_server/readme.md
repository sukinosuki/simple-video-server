## video
- ~~上传~~
- ~~编辑~~
- ~~删除~~
- ~~用户的视频列表~~
- ~~用户收藏的视频列表~~

- ~~用户邮箱注册~~
- ~~邮箱验证~~
- ~~重置密码~~
- ~~登录~~

- 展示的视频列表
- ~~视频收藏~~
- ~~取消收藏~~
- ~~点赞、点踩~~
- ~~取消点赞、点踩~~

- 视频评论、一级评论、二级评论

- ~~用户关注~~
- ~~共同关注~~
- ~~共同粉丝~~
- ~~查看某个用户的关注列表~~
- 自己(其他用户)是否关注了某个用户
- ~~返回关注数量排名前n的用户列表~~

注意: 
如果service层需要做事务，不能单独只使用cache层的事务

---

如果需要在分开的dao里做事务, 在service层把tx传到dao层?

---

关注(以掘金、知乎的用户量为前提)

- 用户可以关注其他用户

- 需查询某个用户的关注列表(包含/不包含关注时间时的设计)、总共关注了多少人

- 需查询某个用户被哪些人关注了(包含/不包含关注时间的设计)、总共被多少人关注了

- 需查询用户A和用户B的共同关注列表、共同关注总数

- 需查询用户A是否被用户B关注了(即用户B是否关注了用户A)

- 按关注数量给用户排序?

1. mysql新建follow表, uid(关注者id), follow_uid(被关注者id), created_at(关注时间) (这样一个表的数据量会很大?)
2. redis 为每个用户增加 user:[id]:following关注用户set 和 user:[id]:follower被关注用户set(这样没有记录关注时间、也不能按关注数量为用户排序

---

TODO:

- 所有提交的字段必须校验长度
- 异步发送邮件
- 限流
- 黑名单